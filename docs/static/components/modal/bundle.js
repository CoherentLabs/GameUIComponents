(()=>{"use strict";const e=new RegExp("^s+|s+$","g"),t=["input","textarea"];function n(e){return t.indexOf(e.tagName.toLowerCase())>-1}window.GUIComponentsDefinedElements={};class r extends HTMLElement{get instanceType(){return"BaseComponent"}setupTemplate(e,t){if(!this.isConnected)return console.log(`DEBUG: component ${this.tagName} was not initialized because it was disconnected from the DOM!`);this.template=e.template,t(e.template)}}class i{get instanceType(){return"Validator"}static isFormElement(e){for(e=e.parentElement;e;){if("GAMEFACE-FORM-CONTROL"===e.tagName||"gameface-form-control"===e.tagName)return!0;e=e.parentElement}return!1}static tooLong(){return!1}static tooShort(){return!1}static rangeOverflow(){return!1}static rangeUnderflow(){return!1}static valueMissing(e){return e.hasAttribute("required")&&!e.value}static nameMissing(e){return!e.name&&!e.getAttribute("name")}static isRequired(e){return e.hasAttribute("required")}static customError(){return!1}static willSerialize(e){return!this.nameMissing(e)}static isBadURL(){return!1}static isBadEmail(){return!1}}class s{get instanceType(){return"NativeElementValidator"}constructor(e){this.element=e}isFormElement(){return i.isFormElement(this.element)}tooLong(){return n(this.element)?a.tooLong(this.element):i.tooLong()}tooShort(){return n(this.element)?a.tooShort(this.element):i.tooShort()}rangeOverflow(){return n(this.element)?a.rangeOverflow(this.element):i.rangeOverflow()}rangeUnderflow(){return n(this.element)?a.rangeUnderflow(this.element):i.rangeUnderflow()}valueMissing(){return i.valueMissing(this.element)}nameMissing(){return i.nameMissing(this.element)}customError(){return i.customError()}isRequired(){return i.isRequired(this.element)}willSerialize(){return i.willSerialize(this.element)}isBadEmail(){return!!n(this.element)&&a.isBadEmail(this.element)}isBadURL(){return!!n(this.element)&&a.isBadURL(this.element)}}class o extends r{get instanceType(){return"CustomElementValidator"}isFormElement(){return i.isFormElement(this)}tooLong(){return i.tooLong(this)}tooShort(){return i.tooShort(this)}valueMissing(){return i.valueMissing(this)}nameMissing(){return i.nameMissing(this)}customError(){return i.customError()}isRequired(){return i.isRequired(this)}rangeOverflow(){return i.rangeOverflow(this)}rangeUnderflow(){return i.rangeUnderflow(this)}willSerialize(){return i.willSerialize(this)}isBadEmail(){return i.isBadEmail(this)}isBadURL(){return i.isBadURL(this)}}class a{get instanceType(){return"TextFieldValidator"}static tooLong(e){const t=e.getAttribute("maxlength");return!!t&&e.value.length>parseFloat(t)}static tooShort(e){const t=e.getAttribute("minlength");return!!t&&e.value.length<parseFloat(t)}static rangeOverflow(e){const t=e.getAttribute("max");return!!t&&parseFloat(e.value)>parseFloat(t)}static rangeUnderflow(e){const t=e.getAttribute("min");return!!t&&parseFloat(e.value)<parseFloat(t)}static isBadURL(e){if("url"!==e.getAttribute("type"))return!1;const t=e.pattern||e.getAttribute("pattern");return!!t&&!e.value.match(t)}static isBadEmail(e){return"email"===e.getAttribute("type")&&!e.value.match("@")}}const l=new function(){const t="component-slot",n={DOWN:40,LEFT:37,RIGHT:39,UP:38,HOME:36,END:35,ENTER:13,ESCAPE:27,TAB:9,SHIFT:16,CTRL:17,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,LETTER_A:65},l=new class{constructor(){this.imported=this.imported||[],this.KEYCODES=n,this.cachedComponents={},this.CustomElementValidator=o,this.NativeElementValidator=s,this.TextFieldValidator=a,this.Validator=i,this.BaseComponent=r}importScript(e){const t=document.createElement("script");t.setAttribute("src",e),document.body.appendChild(t)}loadHTML(e){return this.loadResource(e).then((e=>e.template))}whenDefined(e){if(void 0!==window.GUIComponentsDefinedElements[e])return window.GUIComponentsDefinedElements[e].promise;const t=window.GUIComponentsDefinedElements[e]={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t.promise}defineCustomElement(e,t){window.GUIComponentsDefinedElements[e]||customElements.get(e)||(this.whenDefined(e),customElements.define(e,t),window.GUIComponentsDefinedElements[e].resolve(t))}importComponent(e){requestAnimationFrame((()=>{this.importScript(e+"/script.js")}))}removeSlashes(e){return e.replace(/[/|\\]/g,"")}removeNewLines(t){return t.replace(e,"").trim()}removeCopyrightNotice(e){return e.replace("\x3c!--Copyright (c) Coherent Labs AD. All rights reserved. Licensed under the MIT License. See License.txt in the project root for license information. --\x3e","").trim()}resolveWithTemplate(e){return new Promise((t=>{t({template:e.template,url:e.url})}))}loadResource(e){if(e.template&&"string"==typeof e.template){if(e.isRendered)return this.resolveWithTemplate(e);const t=this.removeCopyrightNotice(e.template);return new Promise((n=>{n({template:this.removeNewLines(t),url:e.url})}))}if("object"==typeof e.template&&e.isRendered)return this.resolveWithTemplate(e);if(window.__optimize){const t=this.removeSlashes(e.url),n=document.getElementById(t).firstChild;return n?new Promise((t=>{t({template:n.innerHTML,url:e.url})})):this.requestResource(e.url)}return this.requestResource(e.url)}requestResource(e){const t=new XMLHttpRequest,n=new Promise((function(n,r){t.onload=i=>{200==t.status?n({template:t.responseText,url:e}):r(i)},t.onerror=r}));return t.open("GET",e),t.send(),n}findSlots(e,n,r={}){const i=e.children,s=i.length;for(let e=0;e<s;++e){const s=i[e],o=s.tagName.toLowerCase();if("component-slot"===o){const e=s.dataset.name;r[e]||(r[e]=[]),r[e].push(s),this.findSlots(s,n,r)}else if(s.hasAttribute("slot")){const e=s.getAttribute("slot");r[e]||(r[e]=[]),r[e].push(s),this.findSlots(s,n,r)}else("gameface-scrollable-container"===o||o!==t&&n!==o&&!window.GUIComponentsDefinedElements[o])&&this.findSlots(s,n,r)}return r}replaceSlots(e,t){const n=t[0];if(e.length&&n.childNodes.length)for(;n.firstChild;)n.removeChild(n.lastChild);const r=n.parentNode;r.removeChild(n);for(let t=0;t<e.length;++t)r.appendChild(e[t])}transferContent(e,t){for(;t.childNodes.length>0;){const e=t.childNodes;t.removeChild(e[e.length-1])}for(;e.childNodes.length>0;){const n=e.childNodes[0];e.removeChild(n),t.appendChild(n)}}renderOnce(e){return!e.isRendered&&(this.render(e),e.isRendered=!0,!0)}render(e){const t=document.createElement("div");t.innerHTML=e.template;const n=e.tagName.toLowerCase(),r=this.findSlots(t,n),i=this.findSlots(e,n),s=Object.keys(i);if(Object.keys(r).length)for(const e of s)i[e]&&r[e]&&this.replaceSlots(i[e],r[e]);this.transferContent(t,e)}transferChildren(e,t,n){const r=document.createElement("div");r.innerHTML=e.template;const i=r.querySelector(t);n.forEach((e=>i.appendChild(e))),this.transferContent(r,e)}waitForFrames(e=(()=>{}),t=3){if(0===t)return e();t--,requestAnimationFrame((()=>this.waitForFrames(e,t)))}isBrowserGameface(){return navigator.userAgent.match("Cohtml")}};class c extends HTMLElement{constructor(){super(),this.originalAppendChild=this.appendChild,this.originalInsertBefore=this.insertBefore,this.originalReplaceChild=this.replaceChild,this.originalRemoveChild=this.removeChild,this.appendChild=e=>{const t=this.originalAppendChild(e);return this.disptachSlotChange(t),t},this.insertBefore=(e,t)=>{const n=this.originalInsertBefore(e,t);return this.disptachSlotChange(n),n},this.replaceChild=(e,t)=>{const n=this.originalReplaceChild(e,t);return this.disptachSlotChange(n),n},this.removeChild=e=>{const t=this.originalRemoveChild(e);return this.disptachSlotChange(t),t}}disptachSlotChange(e){this.dispatchEvent(new CustomEvent("slotchange"),{target:this,child:e})}}return l.defineCustomElement(t,c),l},c=l.BaseComponent;l.defineCustomElement("gameface-modal",class extends c{constructor(){super(),this.template=' <div class="guic-modal-wrapper"> <div class="guic-modal-backdrop"></div> <div class="guic-modal"> <div class="close guic-modal-close-x">x</div> <div class="guic-modal-header"> <component-slot data-name="header">Put your title here.</component-slot> </div> <div class="guic-modal-body"> <component-slot data-name="body">Put the content here.</component-slot> </div> <div class="guic-modal-footer"> <component-slot data-name="footer">Put your actions here.</component-slot> </div> </div> </div> ',this.state={display:"none"},this.closeBound=e=>this.close(e),this.url="/components/modal/template.html",this.init=this.init.bind(this)}init(e){this.setupTemplate(e,(()=>{l.renderOnce(this),this.attachEventListeners()}))}connectedCallback(){l.loadResource(this).then(this.init).catch((e=>console.error(e)))}attachEventListeners(){const e=this.querySelectorAll(".close");for(let t=0;t<e.length;t++)e[t].addEventListener("click",this.closeBound)}close(){this.style.display="none"}}),new class{constructor(){this.saveButton=document.querySelector(".save"),this.confirmButton=document.querySelector("#confirm"),this.nameField=document.querySelector('input[for="name"]'),this.attachEventListeners()}onSaveName(){document.getElementsByTagName("gameface-modal")[0].style.display="flex"}attachEventListeners(){this.confirmButton.addEventListener("click",this.onConfirm),this.nameField.addEventListener("keyup",(e=>{if(this.nameField.value)return this.saveButton.classList.remove("disabled"),void this.saveButton.addEventListener("click",this.onSaveName);this.saveButton.removeEventListener("click",this.onSaveName),this.saveButton.classList.add("disabled")}))}onConfirm(){const e=document.getElementsByTagName("gameface-modal")[0],t=document.querySelector(".name-text"),n=document.querySelector('input[for="name"]');if(!t||!n)return e.close();document.querySelector(".name").textContent=n.value,e.close(),t.classList.remove("hidden"),t.querySelector(".name").textContent=n.value}}})();