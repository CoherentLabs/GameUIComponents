(()=>{"use strict";const e=new RegExp("^s+|s+$","g"),t=["input","textarea"];function s(e){return t.indexOf(e.tagName.toLowerCase())>-1}window.GUIComponentsDefinedElements={},window.GUIComponentsDefinedElements||(window.GUIComponentsDefinedElements={});class n extends HTMLElement{get instanceType(){return"BaseComponent"}setupTemplate(e,t){if(!this.isConnected)return console.log(`DEBUG: component ${this.tagName} was not initialized because it was disconnected from the DOM!`);this.template=e.template,t(e.template)}isStatePropValid(e,t){const s=this.stateSchema[e];if(!s)return console.error(`A property ${e} does not exist on type ${this.tagName.toLowerCase()}!`),!1;const n=typeof t;return!(!s.type.includes("array")||!Array.isArray(t))||(!!s.type.includes(n)||(console.error(`Property ${e} can not be of type - ${n}. Allowed types are: ${s.type.join(",")}`),!1))}}class i{get instanceType(){return"Validator"}static isFormElement(e){for(e=e.parentElement;e;){if("GAMEFACE-FORM-CONTROL"===e.tagName||"gameface-form-control"===e.tagName)return!0;e=e.parentElement}return!1}static tooLong(){return!1}static tooShort(){return!1}static rangeOverflow(){return!1}static rangeUnderflow(){return!1}static valueMissing(e){return e.hasAttribute("required")&&!e.value}static nameMissing(e){return!e.name&&!e.getAttribute("name")}static isRequired(e){return e.hasAttribute("required")}static customError(){return!1}static willSerialize(e){return!this.nameMissing(e)}static isBadURL(){return!1}static isBadEmail(){return!1}}class r{get instanceType(){return"NativeElementValidator"}constructor(e){this.element=e}isFormElement(){return i.isFormElement(this.element)}tooLong(){return s(this.element)?o.tooLong(this.element):i.tooLong()}tooShort(){return s(this.element)?o.tooShort(this.element):i.tooShort()}rangeOverflow(){return s(this.element)?o.rangeOverflow(this.element):i.rangeOverflow()}rangeUnderflow(){return s(this.element)?o.rangeUnderflow(this.element):i.rangeUnderflow()}valueMissing(){return i.valueMissing(this.element)}nameMissing(){return i.nameMissing(this.element)}customError(){return i.customError()}isRequired(){return i.isRequired(this.element)}willSerialize(){return i.willSerialize(this.element)}isBadEmail(){return!!s(this.element)&&o.isBadEmail(this.element)}isBadURL(){return!!s(this.element)&&o.isBadURL(this.element)}}class a extends n{get instanceType(){return"CustomElementValidator"}isFormElement(){return i.isFormElement(this)}tooLong(){return i.tooLong(this)}tooShort(){return i.tooShort(this)}valueMissing(){return i.valueMissing(this)}nameMissing(){return i.nameMissing(this)}customError(){return i.customError()}isRequired(){return i.isRequired(this)}rangeOverflow(){return i.rangeOverflow(this)}rangeUnderflow(){return i.rangeUnderflow(this)}willSerialize(){return i.willSerialize(this)}isBadEmail(){return i.isBadEmail(this)}isBadURL(){return i.isBadURL(this)}}class o{get instanceType(){return"TextFieldValidator"}static tooLong(e){const t=e.getAttribute("maxlength");return!!t&&e.value.length>parseFloat(t)}static tooShort(e){const t=e.getAttribute("minlength");return!!t&&e.value.length<parseFloat(t)}static rangeOverflow(e){const t=e.getAttribute("max");return!!t&&parseFloat(e.value)>parseFloat(t)}static rangeUnderflow(e){const t=e.getAttribute("min");return!!t&&parseFloat(e.value)<parseFloat(t)}static isBadURL(e){if("url"!==e.getAttribute("type"))return!1;const t=e.pattern||e.getAttribute("pattern");return!!t&&!e.value.match(t)}static isBadEmail(e){return"email"===e.getAttribute("type")&&!e.value.match("@")}}const l=new function(){const t="component-slot",s={DOWN:40,LEFT:37,RIGHT:39,UP:38,HOME:36,END:35,ENTER:13,ESCAPE:27,TAB:9,SHIFT:16,CTRL:17,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,LETTER_A:65},l=new class{constructor(){this.imported=this.imported||[],this.KEYCODES=s,this.cachedComponents={},this.CustomElementValidator=a,this.NativeElementValidator=r,this.TextFieldValidator=o,this.Validator=i,this.BaseComponent=n}importScript(e){const t=document.createElement("script");t.setAttribute("src",e),document.body.appendChild(t)}loadHTML(e){return this.loadResource(e).then((e=>e.template))}whenDefined(e){if(void 0!==window.GUIComponentsDefinedElements[e])return window.GUIComponentsDefinedElements[e].promise;const t=window.GUIComponentsDefinedElements[e]={};return t.promise=new Promise(((e,s)=>{t.resolve=e,t.reject=s})),t.promise}defineCustomElement(e,t){window.GUIComponentsDefinedElements[e]||customElements.get(e)||(this.whenDefined(e),customElements.define(e,t),window.GUIComponentsDefinedElements[e].resolve(t))}importComponent(e){requestAnimationFrame((()=>{this.importScript(e+"/script.js")}))}removeSlashes(e){return e.replace(/[/|\\]/g,"")}removeNewLines(t){return t.replace(e,"").trim()}removeCopyrightNotice(e){return e.replace("\x3c!--Copyright (c) Coherent Labs AD. All rights reserved. Licensed under the MIT License. See License.txt in the project root for license information. --\x3e","").trim()}resolveWithTemplate(e){return new Promise((t=>{t({template:e.template,url:e.url})}))}loadResource(e){if(e.template&&"string"==typeof e.template){if(e.isRendered)return this.resolveWithTemplate(e);const t=this.removeCopyrightNotice(e.template);return new Promise((s=>{s({template:this.removeNewLines(t),url:e.url})}))}if("object"==typeof e.template&&e.isRendered)return this.resolveWithTemplate(e);if(window.__optimize){const t=this.removeSlashes(e.url),s=document.getElementById(t).firstChild;return s?new Promise((t=>{t({template:s.innerHTML,url:e.url})})):this.requestResource(e.url)}return this.requestResource(e.url)}requestResource(e){const t=new XMLHttpRequest,s=new Promise((function(s,n){t.onload=i=>{200==t.status?s({template:t.responseText,url:e}):n(i)},t.onerror=n}));return t.open("GET",e),t.send(),s}findSlots(e,s,n={}){const i=e.children,r=i.length;for(let e=0;e<r;++e){const r=i[e],a=r.tagName.toLowerCase();if("component-slot"===a){const e=r.dataset.name;n[e]||(n[e]=[]),n[e].push(r),this.findSlots(r,s,n)}else if(r.hasAttribute("slot")){const e=r.getAttribute("slot");n[e]||(n[e]=[]),n[e].push(r),this.findSlots(r,s,n)}else("gameface-scrollable-container"===a||a!==t&&s!==a&&!window.GUIComponentsDefinedElements[a])&&this.findSlots(r,s,n)}return n}replaceSlots(e,t){const s=t[0];if(e.length&&s.childNodes.length)for(;s.firstChild;)s.removeChild(s.lastChild);const n=s.parentNode;n.removeChild(s);for(let t=0;t<e.length;++t)n.appendChild(e[t])}transferContent(e,t){for(;t.childNodes.length>0;){const e=t.childNodes;t.removeChild(e[e.length-1])}for(;e.childNodes.length>0;){const s=e.childNodes[0];e.removeChild(s),t.appendChild(s)}}renderOnce(e){return!e.isRendered&&(this.render(e),e.isRendered=!0,!0)}render(e){const t=document.createElement("div");t.innerHTML=e.template;const s=e.tagName.toLowerCase(),n=this.findSlots(t,s),i=this.findSlots(e,s),r=Object.keys(i);if(Object.keys(n).length)for(const e of r)i[e]&&n[e]&&this.replaceSlots(i[e],n[e]);this.transferContent(t,e)}transferChildren(e,t,s){const n=document.createElement("div");n.innerHTML=e.template;const i=n.querySelector(t);s.forEach((e=>i.appendChild(e))),this.transferContent(n,e)}waitForFrames(e=(()=>{}),t=3){if(0===t)return e();t--,requestAnimationFrame((()=>this.waitForFrames(e,t)))}isBrowserGameface(){return navigator.userAgent.match("Cohtml")}};class c extends HTMLElement{constructor(){super(),this.originalAppendChild=this.appendChild,this.originalInsertBefore=this.insertBefore,this.originalReplaceChild=this.replaceChild,this.originalRemoveChild=this.removeChild,this.appendChild=e=>{const t=this.originalAppendChild(e);return this.disptachSlotChange(t),t},this.insertBefore=(e,t)=>{const s=this.originalInsertBefore(e,t);return this.disptachSlotChange(s),s},this.replaceChild=(e,t)=>{const s=this.originalReplaceChild(e,t);return this.disptachSlotChange(s),s},this.removeChild=e=>{const t=this.originalRemoveChild(e);return this.disptachSlotChange(t),t}}disptachSlotChange(e){this.dispatchEvent(new CustomEvent("slotchange"),{target:this,child:e})}}return l.defineCustomElement(t,c),l};let c=0,h=0;const d=l.KEYCODES,u=l.BaseComponent;class m extends HTMLElement{static get observedAttributes(){return["selected"]}attributeChangedCallback(e,t,s){const n=this.hasAttribute("selected");this.setAttribute("tabindex",n?"0":"-1")}get selected(){return this.getAttribute("selected")}set selected(e){e?(this.setAttribute("selected",e),this.classList.add("guic-tabs-active-tab")):(this.classList.remove("guic-tabs-active-tab"),this.removeAttribute("selected"))}get index(){return this._index}set index(e){this._index=e,this.setAttribute("index",e)}constructor(){super(),this.selected=!1}connectedCallback(){this.index||(this.index=""+c++)}}class p extends HTMLElement{static get observedAttributes(){return["selected"]}get selected(){return this.getAttribute("selected")}set selected(e){e?(this.setAttribute("selected",e),this.classList.add("guic-tabs-active-panel")):(this.classList.remove("guic-tabs-active-panel"),this.removeAttribute("selected"))}get index(){return this._index}set index(e){this._index=e,this.setAttribute("index",e)}constructor(){super(),this.selected=!1}attributeChangedCallback(e,t,s){"selected"===e&&(this.style.display="true"===s?"block":"none")}connectedCallback(){this.index||(this.index=""+h++)}}l.defineCustomElement("gameface-tabs",class extends u{constructor(){super(),this.template=' <div class="guic-tabs-wrapper"> <div class="guic-tabs-header"> <component-slot data-name="tab"> <tab-heading slot="tab">First Tab</tab-heading> <tab-heading slot="tab">Second Tab</tab-heading> </component-slot> </div> <component-slot data-name="panel"> <tab-panel slot="panel">First Tab Content</tab-panel> <tab-panel slot="panel">Second Tab Content</tab-panel> </component-slot> </div>',this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this),this.url="/components/tabs/template.html",this.init=this.init.bind(this)}init(e){this.setupTemplate(e,(()=>{l.renderOnce(this),this.tabSlot=this.querySelector('[data-name="tab"]'),this.panelSlot=this.querySelector('[data-name="panel"]'),this.attachEventListeners()}))}connectedCallback(){this.tabs=this.getElementsByTagName("tab-heading"),this.panels=this.getElementsByTagName("tab-panel"),l.loadResource(this).then(this.init).catch((e=>console.error(e)))}onClick(e){this.selectTab(e.currentTarget)}getPanelForTab(e){return this.querySelector(`tab-panel[index="${e.getAttribute("index")}"]`)}getAllTabs(){return Array.from(this.getElementsByTagName("tab-heading"))}getAllPanels(){return Array.from(this.getElementsByTagName("tab-panel"))}reset(){const e=this.getAllTabs(),t=this.getAllPanels();e.forEach((e=>e.selected=!1)),t.forEach((e=>e.selected=!1))}attachEventListeners(){this.addEventListener("keydown",this.onKeyDown);const e=this.querySelectorAll("tab-heading");for(const t of e)t.addEventListener("click",this.onClick)}selectTab(e){this.reset();const t=this.getPanelForTab(e);t?(e.selected=!0,t.selected=!0,e.focus()):console.error(`Could not find tab panel corresponding to tab ${t}`)}getPrevTab(){const e=this.getAllTabs(),t=e.findIndex((e=>e.selected))-1;return e[(t+e.length)%e.length]}getFirstTab(){return this.getAllTabs()[0]}getNextTab(){const e=this.getAllTabs(),t=e.findIndex((e=>e.selected))+1;return e[t%e.length]}getLastTab(){const e=this.getAllTabs();return e[e.length-1]}onKeyDown(e){if("tab-heading"!==e.target.tagName.toLowerCase()||e.altKey)return;let t;switch(e.keyCode){case d.LEFT:case d.UP:t=this.getPrevTab();break;case d.RIGHT:case d.DOWN:t=this.getNextTab();break;case d.HOME:t=this.getFirstTab();break;case d.END:t=this.getLastTab();break;default:return}e.preventDefault(),this.selectTab(t)}}),l.defineCustomElement("tab-heading",m),l.defineCustomElement("tab-panel",p)})();