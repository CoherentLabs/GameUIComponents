var zoom=(()=>{var m=(n,t)=>()=>(n&&(t=n(n=0)),t);var y=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var r,s,c=m(()=>{r=class{constructor(){this.actions=[],this.keyboardFunctions=[],this.gamepadFunctions=[]}init(){window._IM||(window._IM=new r)}getKeys(t){return _IM.keyboardFunctions.filter(e=>e.keys.every(o=>t.includes(o)))}getKeysIndex(t){return _IM.keyboardFunctions.findIndex(e=>e.keys.every(o=>t.includes(o)))}getGamepadAction(t){return _IM.gamepadFunctions.find(e=>e.actions.every(o=>t.includes(o)))}getGamepadActionIndex(t){return _IM.gamepadFunctions.findIndex(e=>e.actions.every(o=>t.includes(o)))}getAction(t){return _IM.actions.find(e=>e.name===t)}getActionIndex(t){return _IM.actions.findIndex(e=>e.name===t)}},s=new r});var l,a,u=m(()=>{c();l=class{register(t,e){if(s.getAction(t))return console.error(`The following action "${t}" is already registered!`);_IM.actions.push({name:t,callback:e})}remove(t){let e=s.getActionIndex(t);if(e===-1)return console.error(`${t} is not a registered action!`);_IM.actions.splice(e,1)}execute(t,e){let o=s.getAction(t);if(!o)return console.error(`${t} is not a registered action!`);o.callback(e)}},a=new l});var h,p,g=m(()=>{u();h=class{constructor(t){let e=(Math.random()+1).toString(36).substring(7);this.options=t,this.options.maxZoom=this.options.maxZoom||1/0,this.options.minZoom=this.options.minZoom||.1,this.options.zoomFactor=this.options.zoomFactor||.1,this.enabled=!1,this.actionName=`pan-and-zoom-${e}`,this.offset={x:0,y:0},this.transform={x:0,y:0,scale:1},this.onWheel=this.onWheel.bind(this),this.init()}init(){if(!this.enabled){if(this.zoomableElement=document.querySelector(this.options.element),!this.zoomableElement)return console.error(`${this.options.element} is not a correct element selector`);this.zoomableElement.addEventListener("wheel",this.onWheel),this.registerActions(),this.zoomableElement.style.transformOrigin="top left",this.enabled=!0}}deinit(){!this.enabled||(this.zoomableElement.removeEventListener("wheel",this.onWheel),this.removeActions(),this.enabled=!1)}onWheel(t){t.preventDefault(),a.execute(this.actionName,{x:t.clientX,y:t.clientY,zoomDirection:Math.sign(t.deltaY)})}registerActions(){a.register(this.actionName,({x:t,y:e,zoomDirection:o})=>{let f=this.calculateOffsets(t,e);this.options.onZoom&&this.options.onZoom();let i=this.transform.scale-o*this.options.zoomFactor;if(i<this.options.minZoom||i>this.options.maxZoom)return;let d={x:f.x/this.transform.scale,y:f.y/this.transform.scale};this.transform.x+=d.x*(this.transform.scale-i),this.transform.y+=d.y*(this.transform.scale-i),this.transform.scale=i,this.zoomableElement.style.transform=`matrix(${this.transform.scale}, 0, 0, ${this.transform.scale}, ${this.transform.x}, ${this.transform.y})`})}removeActions(){a.remove(this.actionName)}calculateOffsets(t,e){let o=this.zoomableElement.getBoundingClientRect();return{x:t-o.x,y:e-o.y}}getMargins(){let{marginTop:t,marginLeft:e}=getComputedStyle(this.zoomableElement);this.margins={x:parseFloat(e),y:parseFloat(t)}}},p=h});var b=y((_,x)=>{g();c();s.init();x.exports=p});return b();})();
//# sourceMappingURL=zoom.min.js.map
