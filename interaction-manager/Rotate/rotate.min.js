var rotate=(()=>{var r=(o,t)=>()=>(o&&(t=o(o=0)),t);var A=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);function d(o){return o*180/Math.PI}function g(){return(Math.random()+1).toString(36).substring(7)}var p=r(()=>{});var s,i,l=r(()=>{s=class{constructor(){this.actions=[],this.keyboardFunctions=[],this.gamepadFunctions=[]}init(){window._IM||(window._IM=new s)}getKeys(t){return _IM.keyboardFunctions.filter(e=>e.keys.every(n=>t.includes(n)))}getKeysIndex(t){return _IM.keyboardFunctions.findIndex(e=>e.keys.every(n=>t.includes(n)))}getGamepadAction(t){return _IM.gamepadFunctions.find(e=>e.actions.every(n=>t.includes(n)))}getGamepadActionIndex(t){return _IM.gamepadFunctions.findIndex(e=>e.actions.every(n=>t.includes(n)))}getAction(t){return _IM.actions.find(e=>e.name===t)}getActionIndex(t){return _IM.actions.findIndex(e=>e.name===t)}},i=new s});var c,a,f=r(()=>{l();c=class{register(t,e){if(i.getAction(t))return console.error(`The following action "${t}" is already registered!`);_IM.actions.push({name:t,callback:e})}remove(t){let e=i.getActionIndex(t);if(e===-1)return console.error(`${t} is not a registered action!`);_IM.actions.splice(e,1)}execute(t,e){let n=i.getAction(t);if(!n)return console.error(`${t} is not a registered action!`);n.callback(e)}},a=new c});var u,w,m,M,v=r(()=>{p();f();u=360,w=90,m=class{constructor(t){let e=g();this.options=t,this.rotatingElement=null,this.elementPosition={x:0,y:0},this.angle=0,this.enabled=!1,this.actionName=`rotate-${e}`,this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.init()}init(){if(!this.enabled){if(this.rotatingElement=this.rotatingElement||document.querySelector(this.options.element),!this.rotatingElement)return console.error(`${this.options.element} is not a valid element selector`);this.rotatingElement.addEventListener("mousedown",this.onMouseDown),this.registerAction(),this.enabled=!0}}deinit(){!this.enabled||(this.rotatingElement.removeEventListener("mousedown",this.onMouseDown),this.removeActions(),this.enabled=!1)}onMouseDown(t){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp);let{x:e,y:n,height:h,width:I}=this.rotatingElement.getBoundingClientRect();this.elementPosition={x:e+I/2,y:n+h/2};let y=this.getAngle(t.clientX,t.clientY);this.initalAngle=y-this.angle}onMouseMove(t){this.angle=this.getAngle(t.clientX,t.clientY)-this.initalAngle,this.options.snapAngle&&(this.angle=Math.floor(this.angle/this.options.snapAngle)*this.options.snapAngle),a.execute(this.actionName,this.angle),this.options.onRotation&&this.options.onRotation(this.angle<0?u+this.angle:this.angle)}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}registerAction(){a.register(this.actionName,t=>{this.rotatingElement.style.transform=`rotate(${t}deg)`})}removeActions(){a.remove(this.actionName)}getAngle(t,e){let n=t-this.elementPosition.x,h=e-this.elementPosition.y;return(d(Math.atan2(h,n))+u+w)%u}},M=m});var b=A((R,x)=>{v();l();i.init();x.exports=M});return b();})();
//# sourceMappingURL=rotate.min.js.map
